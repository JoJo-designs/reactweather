(this.webpackJsonpweatherapp=this.webpackJsonpweatherapp||[]).push([[0],{19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(10),s=a.n(n),r=a(2),i=a(3),l=a.n(i),o=a(5),d=a(4),u=(a(7),a(0));function j(e){var t=Object(c.useState)(""),a=Object(r.a)(t,2),n=a[0],s=a[1];function i(){return(i=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/geo/1.0/direct?q=".concat(n,"&appid=89e0b7e8dbbac9434ed75176dac7f8a3"));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,h(a),j(a),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),alert("We ran into an issue. The inputted name may not be correct or no value was entered. please try again.");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var j=function(t){e.onChange(t)},h=function(e){console.log(e),(0,Object(d.useIndexedDB)("cities").add)({cityName:e[0].name,countryCode:e[0].country,lat:e[0].lat,lon:e[0].lon}).then((function(e){console.log("ID Generated: ",e)}),(function(e){console.log(e)}))},m=function(){console.log("state will be changed"),v(!1===x)},b=Object(c.useState)(!1),p=Object(r.a)(b,2),x=p[0],v=p[1],O=Object(c.useState)(""),g=Object(r.a)(O,2),f=g[0],y=g[1],N=Object(c.useState)(""),w=Object(r.a)(N,2),C=w[0],D=w[1];console.log(f,C);function I(){return(I=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("advance search active"),e.prev=1,e.next=4,fetch("https://api.openweathermap.org/geo/1.0/direct?q=".concat(f,",").concat(C,"&appid=89e0b7e8dbbac9434ed75176dac7f8a3"));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,h(a),j(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),alert("We ran into an issue. The inputted name may not be correct or no values were entered. please try again.");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(u.jsx)("div",{className:"searchBox",children:x?Object(u.jsxs)("div",{className:"advancedSearch",children:[Object(u.jsx)("input",{className:"Advinputbox",placeholder:"Search a City",value:f,name:"advCity",type:"text",onChange:function(e){var t=e.target.value;y(t)}}),Object(u.jsxs)("select",{className:"AdvSelect",name:"country",onChange:function(e){var t=e.target.value;D(t)},children:[Object(u.jsx)("option",{value:"None",children:"Country"}),Object(u.jsx)("option",{value:"CA",children:"Canada"}),Object(u.jsx)("option",{value:"US",children:"USA"}),Object(u.jsx)("option",{value:"GB",children:"UK"})]}),Object(u.jsx)("button",{className:"searchBtn",onClick:function(){return I.apply(this,arguments)},children:"Search"}),Object(u.jsx)("button",{className:"Advance",onClick:m,children:"Basic Search"})]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{className:"inputbox",placeholder:"Search a City",value:n,name:"searchValue",type:"text",onChange:function(e){var t=e.target,a=t.value;"searchValue"===t.name&&s(a)}}),Object(u.jsx)("button",{onClick:function(){return i.apply(this,arguments)},className:"searchBtn",children:"Search"}),Object(u.jsx)("button",{className:"Advance",onClick:m,children:"Advanced Search"})]})})}a(8);var h=a(11),m=a.n(h),b=a.p+"static/media/802.e7dd3721.svg",p=a.p+"static/media/800.41c6c635.svg",x=a.p+"static/media/803.e6537cfd.svg",v=a.p+"static/media/601.80108998.svg",O=a.p+"static/media/501.200911b6.svg",g=a.p+"static/media/502.69228fb0.svg";function f(e){var t=e.fiveDay.splice(1,5);console.log(t);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{className:"five",children:"Five Day Forecast "}),t.map((function(e){return Object(u.jsxs)("div",{className:"fiveBoxes",children:[Object(u.jsxs)("div",{className:"infoBox",children:[Object(u.jsx)("p",{className:"date",children:(a=e.dt,a*=1e3,m()(a).format("MMM Do YYYY"))}),Object(u.jsxs)("p",{className:"dailytext",children:["Temp: ",Math.floor(e.temp.day)]}),Object(u.jsxs)("p",{className:"dailytext",children:["Humidity: ",Math.floor(e.humidity)]})]}),Object(u.jsxs)("aside",{className:"centerImg",children:[(t=e.weather[0].id,console.log(t),301===t||500===t||501===t?Object(u.jsx)("img",{className:"smallerImg",src:O,alt:"cloud with light rain"}):502===t?Object(u.jsx)("img",{className:"smallerImg",src:g,alt:"cloud with heavy rain"}):600===t||601===t||616===t?Object(u.jsx)("img",{className:"smallerImg",src:v,alt:"cloud with snow"}):800===t?Object(u.jsx)("img",{className:"smallerImg",src:p,alt:"Sunny weather"}):801===t||802===t||803===t?Object(u.jsx)("img",{className:"smallerImg",src:b,alt:"Cloudy weather"}):804===t?Object(u.jsx)("img",{className:"smallerImg",src:x,alt:"Few Clouds"}):void 0),Object(u.jsx)("p",{className:"dailytext",children:e.weather[0].description})]})]},e.dt);var t,a}))]})}a(9);var y=a.p+"static/media/302.69228fb0.svg";function N(e){var t=Object(c.useState)(""),a=Object(r.a)(t,2),n=a[0],s=a[1];function i(){return(i=Object(o.a)(l.a.mark((function t(){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.cityData.lat),t.prev=1,t.next=4,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.cityData.lat,"&lon=").concat(e.cityData.lon,"&exclude=minutely,hourly,alerts&units=metric&appid=89e0b7e8dbbac9434ed75176dac7f8a3"));case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,console.log(c),s(c),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0),alert("We ran into an issue. Please try again.");case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}Object(c.useEffect)((function(){!0===e.cityData.hasData&&function(){i.apply(this,arguments)}()}),[e]);return Object(u.jsx)("div",{children:n?Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"forecast",children:[Object(u.jsxs)("h2",{className:"bodyHeader",children:[function(){var t=e.cityData.cityName;return t[0].toUpperCase()+t.substring(1)}()," Current Forecast"]}),Object(u.jsxs)("div",{className:"dataBox",children:[Object(u.jsxs)("div",{className:"data",children:[Object(u.jsxs)("h3",{children:["Temp: ",Math.floor(n.current.temp)]}),Object(u.jsxs)("h3",{children:["Humidity: ",Math.round(n.current.humidity)]}),Object(u.jsxs)("h3",{children:["Wind Speed: ",Math.round(n.current.wind_speed)]}),Object(u.jsx)("div",{children:n.current.uvi<3?(console.log("UV is Low"),Object(u.jsxs)("h3",{className:" uv low",children:["UV Index: ",n.current.uvi]})):n.current.uvi<4&&n.current.uvi>7?(console.log("UV is Mid"),Object(u.jsxs)("h3",{className:" uv mid",children:["UV Index: ",n.current.uvi]})):n.current.uvi>8?(console.log("UV is High"),Object(u.jsxs)("h3",{className:" uv high",children:["UV Index: ",n.current.uvi]})):void 0})]}),Object(u.jsxs)("div",{className:"weatherImg",children:[function(){var e=n.current.weather[0].id;return 301===e||500===e||501===e?Object(u.jsx)("img",{className:"smallerImg",src:O,alt:"cloud with light rain"}):502===e?Object(u.jsx)("img",{className:"smallerImg",src:y,alt:"cloud with heavy rain"}):600===e||601===e||616===e?Object(u.jsx)("img",{className:"smallerImg",src:v,alt:"cloud with snow"}):800===e?Object(u.jsx)("img",{className:"smallerImg",src:p,alt:"Sunny weather"}):801===e||802===e||803===e?Object(u.jsx)("img",{className:"smallerImg",src:b,alt:"Cloudy weather"}):804===e?Object(u.jsx)("img",{className:"smallerImg",src:x,alt:"Few Clouds"}):void 0}(),Object(u.jsx)("p",{children:n.current.weather[0].description})]})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)(f,{fiveDay:n.daily})})]}):Object(u.jsx)("h2",{children:"Waiting for data..."})})}function w(e){var t=Object(d.useIndexedDB)("cities").getAll,a=Object(c.useState)(""),n=Object(r.a)(a,2),s=n[0],i=n[1];Object(c.useEffect)((function(){t().then((function(e){i(e)}))}),[s]);var l=function(t){e.onChange(t)};return Object(u.jsx)("div",{children:s?Object(u.jsx)("div",{children:s.map((function(e){return Object(u.jsxs)("button",{className:"historyBtns",onClick:function(){return function(e){l(e)}(e)},children:[e.cityName,", ",e.countryCode]},e.id)}))}):Object(u.jsx)("div",{children:Object(u.jsx)("h4",{children:" waiting... "})})})}a(19);var C=a.p+"static/media/background.3b5a2f62.jpg";function D(){var e=Object(c.useState)({cityName:"",lat:"",lon:"",hasData:!1}),t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"header",children:"Weather Dashboard"}),Object(u.jsx)("div",{children:Object(u.jsxs)("section",{className:"container",children:[Object(u.jsxs)("div",{className:"oneThrid",children:[Object(u.jsx)(j,{cityData:a,onChange:function(e){n({cityName:e[0].name,lat:e[0].lat,lon:e[0].lon,hasData:!0})}}),Object(u.jsx)(w,{cityData:a,onChange:function(e){n({cityName:e.cityName,lat:e.lat,lon:e.lon,hasData:!0})}})]}),Object(u.jsx)("div",{className:"twoThrids bg",style:{backgroundImage:"url(".concat(C,")")},children:!0===a.hasData?Object(u.jsx)(N,{cityData:a}):Object(u.jsx)("h3",{children:"No data yet"})})]})})]})}function I(){return Object(u.jsx)("div",{children:Object(u.jsx)(D,{})})}Object(d.initDB)({name:"citiesDB",version:1,objectStoresMeta:[{store:"cities",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"cityName",keyPath:"cityName",option:{unique:!0}},{name:"countryCode",keyPath:"countryCode"},{name:"lat",keyPath:"lat",option:{unique:!0}},{name:"lon",keyPath:"lon",option:{unique:!0}}]}]}),s.a.render(Object(u.jsx)(I,{}),document.getElementById("root"))},7:function(e,t,a){},8:function(e,t,a){},9:function(e,t,a){}},[[20,1,2]]]);
//# sourceMappingURL=main.ab936ed5.chunk.js.map